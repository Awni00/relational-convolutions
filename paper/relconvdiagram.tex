\begin{tikzpicture}[node distance=2cm]


% parameters
\definecolor{highlightcolor}{rgb}{0.36, 0.54, 0.66}
\def\edgethickness{2}
\def\edgeOpacity{{30, 50, 70, 30, 50}}
\def\nodeColors{{"highlightcolor", "highlightcolor", "highlightcolor", "white", "white"}}
\def\graphsize{1.5}

% first graph
\begin{scope}[local bounding box=graph1]
    % Nodes
    \foreach \i in {1,...,5} {
        \pgfmathsetmacro\color{\nodeColors[\i-1]};
        \node[circle, draw, fill=\color] (N1\i) at (90+\i*72:\graphsize) {};
    }

    % Edges
    \foreach \i in {1,...,5} {
        \foreach \j in {1,...,5} {
            \ifnum\i<\j
                \pgfmathtruncatemacro\index{\i-1}
                \pgfmathsetmacro\opacity{\edgeOpacity[\index]}
                \draw[black!\opacity, line width=\edgethickness pt] (N1\i) -- (N1\j);
            \fi
        }
    }
\end{scope}

% second graph
\def\nodeColors{{"highlightcolor", "white", "highlightcolor", "highlightcolor", "white"}}
\begin{scope}[shift={(4,0)}, local bounding box=graph2]
    \foreach \i in {1,...,5} {
        \pgfmathsetmacro\color{\nodeColors[\i-1]};
        \node[circle, draw, fill=\color] (N2\i) at (90+\i*72:\graphsize) {};
    }
    % Edges
    \foreach \i in {1,...,5} {
        \foreach \j in {1,...,5} {
            \ifnum\i<\j
                \pgfmathtruncatemacro\index{\i-1}
                \pgfmathsetmacro\opacity{\edgeOpacity[\index]}
                \draw[black!\opacity, line width=\edgethickness pt] (N2\i) -- (N2\j);
            \fi
        }
    }
\end{scope}

% third graph
\def\nodeColors{{"white", "white", "highlightcolor", "highlightcolor", "highlightcolor"}}
\begin{scope}[shift={(10,0)}, local bounding box=graph3]
    \foreach \i in {1,...,5} {
        \pgfmathsetmacro\color{\nodeColors[\i-1]};
        \node[circle, draw, fill=\color] (N3\i) at (90+\i*72:\graphsize) {};
    }
    % Edges
    \foreach \i in {1,...,5} {
        \foreach \j in {1,...,5} {
            \ifnum\i<\j
                \pgfmathtruncatemacro\index{\i-1}
                \pgfmathsetmacro\opacity{\edgeOpacity[\index]}
                \draw[black!\opacity, line width=\edgethickness pt] (N3\i) -- (N3\j);
            \fi
        }
    }
\end{scope}

% graphlet filter
\def\triangleSize{1.5} % Set the desired size of the triangle
\begin{scope}[shift={(4,4)}, local bounding box=triangle]
    % nodes
    \foreach \i in {1,...,3} {
        \node[circle, draw] (T\i) at (90+\i*120:\triangleSize) {};
    }
    % edges
    \draw[black!80, line width=\edgethickness pt] (T1) -- (T2);
    \draw[black!40, line width=\edgethickness pt] (T1) -- (T3);
    \draw[black!30, line width=\edgethickness pt] (T2) -- (T3);
\end{scope}

\draw (T1) -- (graph1.north) node[midway] {$\iprod{\cdot}{\cdot}_\mathrm{rel}$};
\draw (triangle.south) -- (graph2.north) node[midway] {$\iprod{\cdot}{\cdot}_\mathrm{rel}$};
\draw (T2) -- (graph3.north) node[midway] {$\iprod{\cdot}{\cdot}_\mathrm{rel}$};
\path (graph2.east) -- (graph3.west) node[midway] {$\cdots$};

\node [minimum size=1cm, below=1cm of graph1.south] (tz1) {$\tilde{z}_1$};
\node [minimum size=1cm, below=1cm of graph2.south] (tz2) {$\tilde{z}_2$};
\node [minimum size=1cm, below=1cm of graph3.south] (tzng) {$\tilde{z}_{\abs{\calG}}$};

\draw (graph1.south) -- (tz1.north);
\draw (graph2.south) -- (tz2.north);
\draw (graph3.south) -- (tzng.north);

\node [minimum size=1cm, below right=1.5cm and 1cm of tz1.south] (z1) {$z_1$};
\node [minimum size=1cm, below=1.5cm of tz2.south] (z2) {$z_2$};
\node [minimum size=1cm, below left=1.5cm and 1cm of tzng.south] (zng) {$z_{n_g}$};
\path (tz2.east) -- (tzng.west) node[midway] {$\cdots$};

\draw (tz1.south) -- (z1.north);
\draw (tz1.south) -- (z2.north);
\draw (tz1.south) -- (zng.north);
\draw (tz2.south) -- (z1.north);
\draw (tz2.south) -- (z2.north);
\draw (tz2.south) -- (zng.north);
\draw (tzng.south) -- (z1.north);
\draw (tzng.south) -- (z2.north);
\draw (tzng.south) -- (zng.north);
\path (z2.east) -- (zng.west) node[midway] {$\cdots$};

\node [left=0.1cm of graph1.west, align=center] (relsubtensors) {relation subtensors\\ $R[g],\, g \in \calG$};
\node [left=of tz1, below=6.5em of relsubtensors] (relconv) {$R \ast \bm{f}$};
\node [left=of z1, below=5.25em of relconv] (relconvsoft) {$(R \ast \bm{f})(G)$};
\node [left=of triangle, above=8em of relsubtensors,  align=center] (filters) {graphlet filters \\ $\bm{f} \in \reals^{s \times s \times d_r \times n_f}$};

\end{tikzpicture}